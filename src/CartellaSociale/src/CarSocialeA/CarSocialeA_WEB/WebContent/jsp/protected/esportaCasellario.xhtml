<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core" xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui"
	xmlns:webred="http://java.sun.com/jsf/composite/webred" xmlns:webredcs="http://java.sun.com/jsf/composite/webredcs">	  	
	 <ui:composition template="/jsp/protected/layout/layout.xhtml">
	<ui:define name="content">
	<h:form id="frmEsporta">
	<p:panel id="pnlEsportaCasellarioid"  header="Esporta Casellario" >
	
	
	<h:panelGrid id="pnlVerificaid" columns="4" cellpadding="8">
		<p:outputLabel value="Da : " />
		<p:calendar value="#{esportaCasellarioBean.dataDA}" pattern="dd/MM/yyyy"/>
		<p:outputLabel value="A : " />
		<p:calendar value="#{esportaCasellarioBean.dataA}" pattern="dd/MM/yyyy"/>
		
		<p:commandButton id="btnResetid" value="Reset" action="#{esportaCasellarioBean.onBtnResetClick}"
		update="frmEsporta"/>
		<p:outputLabel value="" />
		<p:outputLabel value="" />
		<p:commandButton id="btnVerificaid" value="Verifica" action="#{esportaCasellarioBean.onBtnVerificaCasellarioClick}"
		update="frmEsporta"/>
	
	
	</h:panelGrid>
	
	
	<p:panelGrid id="pnlEsportaid" columns="4" rendered="#{esportaCasellarioBean.showPnlEsporta}">
		<p:outputLabel value="Flussi Inviati : " />
		<p:inputText id="txtFlussiInviatiid" readonly="true" value="#{esportaCasellarioBean.numFlussi}">					
		</p:inputText>
		<p:outputLabel value="Erogazioni Da Inviare : " />
		<p:inputText id="txtEroginviareid" readonly="true" value="#{esportaCasellarioBean.numErogDaEsportare}">					
		</p:inputText>		
		
		<p:outputLabel value="" />
		<p:outputLabel value="" />	
		<p:commandButton id="btnVisualizzaid" value="Visualizza" action="#{esportaCasellarioBean.onBtnVisualizzaErogazClick}"
		update="frmEsporta"/>
		
	    <p:commandButton id="btnEsportaid" value="Esporta" ajax="false" onclick="PrimeFaces.monitorDownload(start, stop);" icon="ui-icon-arrowthick-1-s">
	        <p:fileDownload value="#{esportaCasellarioBean.file}" />
	    </p:commandButton>
	
	</p:panelGrid>
	
	
	
			
	<h:panelGrid id="pnlVisualizzaid" columns="1" rendered="#{esportaCasellarioBean.showPnlVisualizza}" width="100%">
	<p:dataTable id="dataTableStorico" emptyMessage="Nessuna erogazione da esportare per l'intervallo temporale selezionato."
		rows="10" paginator="true" var="erog" value="#{esportaCasellarioBean.erogDaEsportareList}">
		<f:facet name="header">
			Erogazioni da Inviare
		</f:facet>
	
	
	<p:column headerText="Id Erogazione">
        <h:outputText value="#{erog.interventoEsegId}" />
    </p:column>
    
    <p:column headerText="Data Erogazione">
        <h:outputText value="#{erog.dataEsecuzione}">
       		<f:convertDateTime type="date" pattern="dd/MM/yyyy" /> 
		</h:outputText>    
	</p:column>
	    
     <p:column headerText="Denominazione Prestazione">
        <h:outputText value="#{erog.denomPrestazione}" />
    </p:column>
    
 
    <p:column headerText="Nome Beneficiario">
        <h:outputText value="#{erog.nomeBeneficiario}" />
    </p:column>
    
     <p:column headerText="CF Beneficiario">
        <h:outputText value="#{erog.soggettoCodiceFiscale}" />
    </p:column>
 
    
    <p:column headerText="Spesa â‚¬">
        <h:outputText value="#{erog.spesa}">
        	<f:convertNumber maxFractionDigits="2" maxIntegerDigits="8" type="number"/> 
        </h:outputText>
    </p:column>
 
   	
	

	</p:dataTable>
	</h:panelGrid>
	
	
	
	</p:panel>
	</h:form>
	</ui:define>	
	</ui:composition>		
</html>