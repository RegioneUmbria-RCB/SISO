<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
     	xmlns:h="http://java.sun.com/jsf/html"
		xmlns:f="http://java.sun.com/jsf/core"
		xmlns:ui="http://java.sun.com/jsf/facelets"
		xmlns:p="http://primefaces.org/ui"
	  	xmlns:composite="http://java.sun.com/jsf/composite"
	  	xmlns:webred="http://java.sun.com/jsf/composite/webred">
      
	<h:head>
		<title>Anagrafica</title>
	</h:head>
	<h:body>
		<composite:interface componentType="pnlAna">
			<composite:attribute name="iDatiAna" type="it.webred.trainingprj.jsf.interfaces.IDatiAna"/>
		</composite:interface>
		<composite:implementation>
			<p:panel id="pnlDatiAna" style="width: 75%;">				
				<p:panelGrid>
					<f:facet name="header">
						<p:row>
							<p:column colspan="6">  
		            			<h:outputText value="Anagrafica" /> 
		        			</p:column>
		    			</p:row>
					</f:facet>
					<p:row>  
						<p:column style="width: 15%;"> 
	            			<h:outputText value="Cognome (*):" />
	        			</p:column>
	        			<p:column colspan="3">  
	            			<p:inputText style="width: 95%; text-transform: capitalize;" value="#{cc.attrs.iDatiAna.datiAnaBean.cognome}" required="true" requiredMessage="Cognome è un campo obbligatorio" 
	            			maxlength="100"/>
	        			</p:column>
	        			<p:column style="width: 15%;">
	            			<h:outputText value="Nome (*):" /> 
	        			</p:column> 
	        			<p:column style="width: 35%;">  
	            			<p:inputText style="width: 95%; text-transform: capitalize;" value="#{cc.attrs.iDatiAna.datiAnaBean.nome}" required="true" requiredMessage="Nome è un campo obbligatorio" 
	            			maxlength="100"/>
	        			</p:column>
	    			</p:row>
					<p:row>
						<p:column>  
	            			<h:outputText value="Data di nascita (*):" /> 
	        			</p:column> 
	        			<p:column colspan="3">  
	            			<p:calendar value="#{cc.attrs.iDatiAna.datiAnaBean.dataNascita}" pattern="dd/MM/yyyy" required="true" requiredMessage="Data di nascita è un campo obbligatorio" 
	            			validatorMessage="Data di nascita non valida" converterMessage="Data di nascita non valida">
	            				<f:validator validatorId="dateValidator"/>
	            			</p:calendar>
	            			<p:spacer width="10px"/>
	            			<h:outputText value="(gg/mm/aaaa)" style="font-size: 10px;" />
	        			</p:column>
						<p:column>  
	            			<h:outputText value="Comune di nascita (*):" /> 
	        			</p:column> 
	        			<p:column>
	        				<p:autoComplete style="width: 50%;" value="#{cc.attrs.iDatiAna.datiAnaBean.comuneNascita}" required="true" requiredMessage="Comune di nascita è un campo obbligatorio"
	            			minQueryLength="2" completeMethod="#{cc.attrs.iDatiAna.getLstComuni}" var="comuneNascita" itemLabel="#{comuneNascita.descrizione}" itemValue="#{comuneNascita}"
	            			forceSelection="true" converter="#{cc.attrs.iDatiAna.comuneConverter}"/>
	            			<p:spacer width="10px"/>
	            			<p:graphicImage id="imgComuneNascita" value="#{resource['webred/img/punto_interrogativo.gif']}" width="18px" height="18px" style="vertical-align: bottom; cursor: pointer;"/>
	            			<p:tooltip for="imgComuneNascita" value="Inserire i primi due caratteri del nome del comune per attivare la ricerca automatica" />
	        			</p:column>
	    			</p:row>
	    			<p:row>
						<p:column>  
	            			<h:outputText value="Sesso (*):" /> 
	        			</p:column> 
	        			<p:column style="width: 12%;">  
	            			<p:selectOneMenu value="#{cc.attrs.iDatiAna.datiAnaBean.sesso}" required="true" requiredMessage="Sesso è un campo obbligatorio">
	            				<f:selectItems value="#{cc.attrs.iDatiAna.lstSessi}" var="sesso" itemLabel="#{sesso.descrizione}" itemValue="#{sesso}"/>
	            			</p:selectOneMenu>
	        			</p:column>
	        			<p:column style="width: 10%;">  
	            			<h:outputText value="Stato civile:" /> 
	        			</p:column>
	        			<p:column style="width: 13%;">  
	            			<p:selectOneMenu value="#{cc.attrs.iDatiAna.datiAnaBean.statoCivile}">
	            				<f:selectItems value="#{cc.attrs.iDatiAna.lstStatiCivili}" var="statoCivile" itemLabel="#{statoCivile.descrizione}" itemValue="#{statoCivile}"/>
	            			</p:selectOneMenu>
	        			</p:column>
						<p:column>  
	            			<h:outputText value="Codice fiscale (*):" /> 
	        			</p:column> 
	        			<p:column>  
	            			<webred:pnlCodFisc id="codFiscP" codFiscValue="#{cc.attrs.iDatiAna.datiAnaBean.codiceFiscale}" codFiscValMes="Codice fiscale non valido"
	            			codFiscReq="true" codFiscReqMes="Codice fiscale è un campo obbligatorio"/>
	        			</p:column>
	    			</p:row>
	    			<p:row>
	    				<p:column>  
	            			<h:outputText value="Cittadinanza (*):" />
	        			</p:column> 
	        			<p:column colspan="3">  
	            			<p:column style="width: 12%;">  
		            			<p:selectOneMenu style="width: 50%;" value="#{cc.attrs.iDatiAna.datiAnaBean.cittadinanza}" required="true" requiredMessage="Cittadinanza è un campo obbligatorio">
		            				<f:selectItems value="#{cc.attrs.iDatiAna.lstCittadinanze}" var="cittadinanza" itemLabel="#{cittadinanza.descrizione}" itemValue="#{cittadinanza}"/>
		            			</p:selectOneMenu>
		        			</p:column>
	        			</p:column>
	        			<p:column>
	            			<h:outputText value="Status:" /> 
	        			</p:column> 
	        			<p:column>  
	            			<p:selectOneMenu style="width: 50%;" value="#{cc.attrs.iDatiAna.datiAnaBean.status}">
	            				<f:selectItems value="#{cc.attrs.iDatiAna.lstStatus}" var="status" itemLabel="#{status.descrizione}" itemValue="#{status}"/>
	            			</p:selectOneMenu>
	        			</p:column>
	        		</p:row>
	    			<p:row>
	    				<p:column>  
	            			<h:outputText value="Comune di residenza (*):" />
	        			</p:column> 
	        			<p:column colspan="3">  
	            			<p:autoComplete style="width: 50%;" value="#{cc.attrs.iDatiAna.datiAnaBean.comuneResidenza}" required="true" requiredMessage="Comune di residenza è un campo obbligatorio"
	            			minQueryLength="2" completeMethod="#{cc.attrs.iDatiAna.getLstComuni}" var="comuneResidenza" itemLabel="#{comuneResidenza.descrizione}" itemValue="#{comuneResidenza}"
	            			forceSelection="true" converter="#{cc.attrs.iDatiAna.comuneConverter}"/>
	            			<p:spacer width="10px"/>
	            			<p:graphicImage id="imgComuneResidenza" value="#{resource['webred/img/punto_interrogativo.gif']}" width="18px" height="18px" style="vertical-align: bottom; cursor: pointer;"/>
	        				<p:tooltip for="imgComuneResidenza" value="Inserire i primi due caratteri del nome del comune per attivare la ricerca automatica" />
	        			</p:column>
	        			<p:column>
	            			<p:spacer width="10px"/> 
	        			</p:column> 
	        			<p:column>  
	            			<p:spacer width="10px"/>
	        			</p:column>
	        		</p:row>
	        		<p:row>
	    				<p:column>  
	            			<h:outputText value="Medico curante:" />
	        			</p:column> 
	        			<p:column colspan="3">  
	            			<p:selectOneMenu style="width: 50%;" value="#{cc.attrs.iDatiAna.datiAnaBean.medicoCurante}">
	            				<f:selectItems value="#{cc.attrs.iDatiAna.lstMediciCuranti}" var="medicoCurante" itemLabel="#{medicoCurante.descrizione}" itemValue="#{medicoCurante}"/>
	            			</p:selectOneMenu>
	        			</p:column>
	        			<p:column>
	            			<p:spacer width="10px"/> 
	        			</p:column> 
	        			<p:column>  
	            			<p:spacer width="10px"/>
	        			</p:column>
	        		</p:row>
	        		<p:row>
	    				<p:column>  
	            			<h:outputText value="Telefono:" />
	        			</p:column> 
	        			<p:column colspan="3">  
	            			<p:inputText style="width: 50%;" value="#{cc.attrs.iDatiAna.datiAnaBean.telefono}" maxlength="50"/>
	        			</p:column>
	        			<p:column>
	            			<h:outputText value="Cellulare:" /> 
	        			</p:column> 
	        			<p:column>  
	            			<p:inputText style="width: 50%;" value="#{cc.attrs.iDatiAna.datiAnaBean.cellulare}" maxlength="50"/>
	        			</p:column>
	        		</p:row>
	        		<p:row>
	    				<p:column>  
	            			<h:outputText value="E-mail:" />
	        			</p:column> 
	        			<p:column colspan="3">  
	            			<p:inputText style="width: 50%;" value="#{cc.attrs.iDatiAna.datiAnaBean.eMail}" maxlength="50"/>
	        			</p:column>
	        			<p:column>
	            			<p:spacer width="10px"/> 
	        			</p:column> 
	        			<p:column>  
	            			<p:spacer width="10px"/>
	        			</p:column>
	        		</p:row>
	        		<p:row>
	    				<p:column colspan="3" style="vertical-align: top;">
	    					<p:panel>
								<p:panelGrid>
									<f:facet name="header">
										<p:row>  
											<p:column colspan="2" style="text-align: left;">  
						            			<h:outputText value="Dati sociali essenziali apertura" /> 
						        			</p:column>  
						    			</p:row>
									</f:facet>
									<p:row>
					    				<p:column style="width: 38%;">
					            			<h:outputText value="Ufficio (*):" />
					        			</p:column>
					        			<p:column style="width: 62%;">  
					            			<p:selectOneMenu style="width: 95%;" value="#{cc.attrs.iDatiAna.datiAnaBean.ufficio}" required="true" requiredMessage="Ufficio è un campo obbligatorio">
					            				<f:selectItems value="#{cc.attrs.iDatiAna.lstUffici}" var="ufficio" itemLabel="#{ufficio.descrizione}" itemValue="#{ufficio}"/>
					            			</p:selectOneMenu>
					        			</p:column>
					        		</p:row>
					        		<p:row>
					    				<p:column>  
					            			<h:outputText value="Data PIC (*):" />
					        			</p:column> 
					        			<p:column>  
					            			<p:calendar value="#{cc.attrs.iDatiAna.datiAnaBean.dataPic}" pattern="dd/MM/yyyy" required="true" requiredMessage="Data PIC è un campo obbligatorio"
					            			validatorMessage="Data PIC non valida" converterMessage="Data PIC non valida">
					            				<f:validator validatorId="dateValidator"/>
					            			</p:calendar>
					            			<p:spacer width="10px"/>
		            						<h:outputText value="(gg/mm/aaaa)" style="font-size: 10px;" /> 
					        			</p:column>
					        		</p:row>
					        		<p:row>
					    				<p:column>  
					            			<h:outputText value="Assistente sociale (*):" />
					        			</p:column> 
					        			<p:column>  
					            			<p:selectOneMenu style="width: 95%;" value="#{cc.attrs.iDatiAna.datiAnaBean.assistenteSociale}" required="true" requiredMessage="Assistente sociale è un campo obbligatorio">
					            				<f:selectItems value="#{cc.attrs.iDatiAna.lstAssistentiSociali}" var="assistenteSociale" itemLabel="#{assistenteSociale.descrizione}" itemValue="#{assistenteSociale}"/>
					            			</p:selectOneMenu>
					        			</p:column>
					        		</p:row>
								</p:panelGrid>
							</p:panel>
						</p:column>
						<p:column colspan="3" style="vertical-align: top;">
							<p:panel>
								<p:panelGrid>
									<f:facet name="header">
										<p:row>  
											<p:column colspan="4" style="text-align: left;">  
						            			<h:outputText value="Dati chiusura" /> 
						        			</p:column>  
						    			</p:row>
									</f:facet>
									<p:row>
					    				<p:column style="width: 20%;">  
					            			<h:outputText value="Periodo chiusura:" />
					        			</p:column>
					        			<p:column style="width: 20%;">  
					            			<p:selectOneMenu style="width: 95%;" value="#{cc.attrs.iDatiAna.datiAnaBean.periodoChiusura}">
					            				<f:selectItems value="#{cc.attrs.iDatiAna.lstPeriodiChiusura}" var="periodoChiusura" itemLabel="#{periodoChiusura.descrizione}" itemValue="#{periodoChiusura}"/>
					            			</p:selectOneMenu>
					        			</p:column>
					        			<p:column style="width: 25%;">  
					            			<h:outputText value="Data effettiva chiusura:" />
					        			</p:column>
					        			<p:column style="width: 35%;">  
					            			<p:calendar value="#{cc.attrs.iDatiAna.datiAnaBean.dataEffettivaChiusura}" pattern="dd/MM/yyyy"
					            			validatorMessage="Data effettiva chiusura non valida" converterMessage="Data effettiva chiusura non valida">
					            				<f:validator validatorId="dateValidator"/>
					            			</p:calendar>
					            			<p:spacer width="10px"/>
		            						<h:outputText value="(gg/mm/aaaa)" style="font-size: 10px;" />
					        			</p:column>
					        		</p:row>
					        		<p:row>
					    				<p:column>  
					            			<h:outputText value="Motivi chiusura:" />
					        			</p:column>
					        			<p:column colspan="3">
					            			<p:selectOneMenu style="width: 50%;" value="#{cc.attrs.iDatiAna.datiAnaBean.motiviChiusura}">
					            				<f:selectItems value="#{cc.attrs.iDatiAna.lstMotiviChiusura}" var="motiviChiusura" itemLabel="#{motiviChiusura.descrizione}" itemValue="#{motiviChiusura}"/>
					            			</p:selectOneMenu>
					            			<p:spacer width="10px"/>
					            			<p:graphicImage id="imgMotiviChiusura" value="#{resource['webred/img/punto_interrogativo.gif']}" width="18px" height="18px" style="vertical-align: bottom; cursor: pointer;"/>
	            							<p:tooltip for="imgMotiviChiusura" style="width: 300px;">
	            								<h:outputText style="font-weight: bold; font-size: 12px;" value="Motivi di chiusura: che cosa si intende" />
	            								<p:spacer height="10px" width="100%" />
	            								<h:outputText style="font-weight: bold;" value="Deceduto/a" />
	            								<h:outputText value=": motivo di chiusura è il decesso" />
	            								<p:spacer height="5px" width="100%" />
	            								<h:outputText style="font-weight: bold;" value="Trasferito/a" />
	            								<h:outputText value=": persona non più residente nel comune" />
	            								<p:spacer height="5px" width="100%" />
	            								<h:outputText style="font-weight: bold;" value="Int. breve" />
	            								<h:outputText value=": intervento di breve durata" />
	            								<p:spacer height="5px" width="100%" />
	            								<h:outputText style="font-weight: bold;" value="Non collaborazione" />
	            								<h:outputText value=": persona non collaborante con il servizio" />
	            								<p:spacer height="5px" width="100%" />
	            								<h:outputText style="font-weight: bold;" value="Dimissioni" />
	            								<h:outputText value=": chiusura unilaterale da parte del servizio" />
	            								<p:spacer height="5px" width="100%" />
	            								<h:outputText style="font-weight: bold;" value="Passaggio ad altro ufficio" />
	            								<h:outputText value=": passaggio ad altro ufficio sociale interno" />
	            								<p:spacer height="5px" width="100%" />
	            								<h:outputText style="font-weight: bold;" value="Maggiore età" />
	            								<h:outputText value=": raggiunti limiti d'età per i minori" />
	            								<p:spacer height="5px" width="100%" />
	            								<h:outputText style="font-weight: bold;" value="Non luogo a procedere AG" />
	            								<h:outputText value=": intervento per decreto TM" />
	            								<p:spacer height="5px" width="100%" />
	            								<h:outputText style="font-weight: bold;" value="Percorso in autonomia" />
	            								<h:outputText value=": condivisione della dimissione tra servizio e utente" />
	            								<p:spacer height="5px" width="100%" />
	            								<h:outputText style="font-weight: bold;" value="Passaggio ad altro servizio" />
	            								<h:outputText value=": invio dell'utente ad altro servizio esterno al comune" />
	            							</p:tooltip>
					        			</p:column>
					        		</p:row>
								</p:panelGrid>
							</p:panel>
						</p:column>
					</p:row>
	    			<p:row>
						<p:column colspan="6" style="text-align: center;">  
	            			<p:commandButton value="Inserisci" actionListener="#{cc.attrs.iDatiAna.salvaDatiAna()}" />
	            			<p:spacer width="10px"/>
	            			<p:commandButton value="Reimposta" update="pnlDatiAna" process="@this">
								<p:resetInput target="pnlDatiAna" />
							</p:commandButton>
	            			<p:messages autoUpdate="true" severity="info,warn,error" />
	        			</p:column>  
	    			</p:row>
	    			<p:row>
						<p:column colspan="6">  
	            			<h:outputText value="(*) campo obbligatorio " />
	        			</p:column>  
	    			</p:row>
				</p:panelGrid>
			</p:panel>
		</composite:implementation>
	</h:body>
	
</html>